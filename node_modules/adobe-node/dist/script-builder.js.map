{"version":3,"file":"script-builder.js","sourceRoot":"","sources":["../src/script-builder.ts"],"names":[],"mappings":";;AAEA,IAAM,eAAe,GAAW,sPAaxB,CAAC;AAET,IAAM,qBAAqB,GAAG;IAE5B,IAAI,IAAY,CAAC;IACjB,IAAI,IAAY,CAAC;IACjB,IAAI,IAAY,CAAC;IACjB,IAAI,SAAiB,CAAC;IAEtB,IAAM,OAAO,GAAG;QACd,OAAO,EAAP,UAAQ,KAAa;YACnB,IAAI,GAAG,KAAK,CAAC;YACb,OAAO,OAAO,CAAC;QACjB,CAAC;QACD,YAAY,EAAZ,UAAa,KAAa;YACxB,IAAI,GAAG,KAAK,CAAC;YACb,OAAO,OAAO,CAAC;QACjB,CAAC;QACD,OAAO,EAAP,UAAQ,KAAa;YACnB,IAAI,GAAG,KAAK,CAAC;YACb,OAAO,OAAO,CAAC;QACjB,CAAC;QACD,YAAY,EAAZ,UAAa,KAAa;YACxB,SAAS,GAAG,KAAK,CAAC;YAClB,OAAO,OAAO,CAAC;QACjB,CAAC;QACD,KAAK;YACH,OAAO,eAAe;iBACnB,OAAO,CAAC,iBAAiB,EAAE,IAAI,CAAC;iBAChC,OAAO,CAAC,cAAc,EAAE,IAAI,CAAC;iBAC7B,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC;iBAC3B,OAAO,CAAC,mBAAmB,EAAE,SAAS,CAAC,CAAC;QAC7C,CAAC;KACF,CAAA;IAED,OAAO,OAAO,CAAC;AACjB,CAAC,CAAA;AAED,kBAAe,qBAAqB,CAAC","sourcesContent":["import { AdobeScriptBuilder } from './api';\n\nconst commandTemplate: string = `\nvar ___{{__command__}} = (function() {\n    var __stderr;\n    var __stdout;\n    \n    try {\n      {{__vars__}}  \n      __stdout = {{__fn__}}\n    } catch (e) {\n      __stderr = e;\n    } finally {\n      {{__broadcast__}}\n    }\n  })();`;\n\nconst newAdobeScriptBuilder = (): AdobeScriptBuilder => {\n\n  let name: string;\n  let vars: string;\n  let body: string;\n  let broadcast: string;\n\n  const builder = {\n    setName(value: string) {\n      name = value;\n      return builder;\n    },\n    setVariables(value: string) {\n      vars = value;\n      return builder;\n    },\n    setBody(value: string) {\n      body = value;\n      return builder;\n    },\n    setBroadcast(value: string) {\n      broadcast = value;\n      return builder;\n    },\n    build() {\n      return commandTemplate\n        .replace('{{__command__}}', name)\n        .replace('{{__vars__}}', vars)\n        .replace('{{__fn__}}', body)\n        .replace('{{__broadcast__}}', broadcast);\n    }\n  }\n\n  return builder;\n}\n\nexport default newAdobeScriptBuilder;"]}