{"version":3,"file":"commands.js","sourceRoot":"","sources":["../src/commands.ts"],"names":[],"mappings":";;AAEA,IAAM,eAAe,GAAG;IAEpB,IAAM,KAAK,GAAsC,IAAI,GAAG,EAAgC,CAAC;IAEzF,OAAO;QACH,IAAI,EAAE,UAAC,IAAwB,IAAoB,OAAA,IAAI,OAAO,CAAC,UAAA,OAAO;YAClE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;gBAAE,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;YAC1D,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACnC,OAAO,OAAO,EAAE,CAAC;QACrB,CAAC,CAAC,EAJiD,CAIjD;QACF,OAAO,EAAE,UAAC,WAAmB,IAAoB,OAAA,IAAI,OAAO,CAAC,UAAA,OAAO;YAChE,IAAI,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE;gBACxB,IAAM,OAAO,GAAG,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,KAAK,EAAE,CAAC;gBAC/C,IAAG,OAAO,EAAE;oBACR,OAAO,CAAC,OAAO,EAAE,CAAC;iBACrB;aACJ;YACD,OAAO,OAAO,EAAE,CAAC;QACrB,CAAC,CAAC,EAR+C,CAQ/C;KACL,CAAA;AACL,CAAC,CAAC;AAEF,kBAAe,eAAe,CAAC","sourcesContent":["import { AdobeScriptCommand, CommandStack } from \"./api\";\n\nconst newCommandStack = (): CommandStack => {\n\n    const stack: Map<string, AdobeScriptCommand[]> = new Map<string, AdobeScriptCommand[]>();\n\n    return {\n        push: (data: AdobeScriptCommand): Promise<void> => new Promise(resolve => {\n            if (!stack.has(data.command)) stack.set(data.command, []);\n            stack.get(data.command).push(data);\n            return resolve();\n        }),\n        resolve: (commandName: string): Promise<void> => new Promise(resolve => {\n            if (stack.has(commandName)) {\n                const command = stack.get(commandName).shift();\n                if(command) {\n                    command.resolve();\n                }\n            }\n            return resolve();\n        })\n    }\n};\n\nexport default newCommandStack;"]}